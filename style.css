/*
 * Filename: style.css
 * Description: A meticulously crafted stylesheet for a top-tier, modern blog.
 * Version: 3.0 (Masterpiece Edition)
 * Features: Aurora background, fluid typography, robust responsiveness, advanced aesthetics.
 */

/* -------------------------------------------------------------------------- */
/*                         Part 1: 核心设计体系 (Core Design System)            */
/* -------------------------------------------------------------------------- */
:root {
    /* 1.1 - Fluid Typography (自适应字体) */
    /* 使用 clamp() 函数，让字体大小在320px到1200px的屏幕宽度之间平滑缩放 */
    --font-size-sm: clamp(0.8rem, 0.17vw + 0.76rem, 0.94rem);
    --font-size-base: clamp(1rem, 0.34vw + 0.91rem, 1.25rem);
    --font-size-md: clamp(1.25rem, 0.61vw + 1.1rem, 1.69rem);
    --font-size-lg: clamp(1.56rem, 1vw + 1.31rem, 2.25rem);
    --font-size-xl: clamp(1.95rem, 1.56vw + 1.56rem, 3rem);
    --font-size-xxl: clamp(2.44rem, 2.38vw + 1.85rem, 4rem);

    /* 1.2 - Color Palette (调色板) */
    --color-primary-light: #5e548e;
    --color-secondary-light: #9f86c0;
    --color-text-light: #231942;
    --color-bg-light: #e0b1cb;
    --color-accent-light: #be95c4;
    --color-border-light: rgba(0, 0, 0, 0.07);

    --color-primary-dark: #90f1ef;
    --color-secondary-dark: #a1c4fd;
    --color-text-dark: #e8e8e8;
    --color-bg-dark: #121826;
    --color-accent-dark: #4b6cb7;
    --color-border-dark: rgba(255, 255, 255, 0.1);
    
    /* 1.3 - Fonts (字体) */
    --font-sans: 'Poppins', 'Helvetica Neue', 'Arial', 'sans-serif';
    --font-serif: 'Lora', 'Georgia', 'serif';
    
    /* 1.4 - Layout & Spacing (布局与间距) */
    --content-width: 800px;
    --border-radius: 12px;
    --spacing-unit: 1rem;
    --transition-speed: 0.35s;
}

/* 根据主题切换变量 */
html[data-theme='light'] {
    --color-primary: var(--color-primary-light);
    --color-secondary: var(--color-secondary-light);
    --color-text: var(--color-text-light);
    --color-bg: var(--color-bg-light);
    --color-accent: var(--color-accent-light);
    --color-border: var(--color-border-light);
}
html[data-theme='dark'] {
    --color-primary: var(--color-primary-dark);
    --color-secondary: var(--color-secondary-dark);
    --color-text: var(--color-text-dark);
    --color-bg: var(--color-bg-dark);
    --color-accent: var(--color-accent-dark);
    --color-border: var(--color-border-dark);
}

/* -------------------------------------------------------------------------- */
/*                        Part 2: 全局重置与基础样式                        */
/* -------------------------------------------------------------------------- */
*, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: var(--font-sans);
    font-size: var(--font-size-base);
    color: var(--color-text);
    background-color: var(--color-bg); /* 提供一个基础背景色 */
    line-height: 1.7;
    min-height: 100vh;
    overflow-x: hidden; /* 防止水平滚动条 */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    transition: background-color var(--transition-speed), color var(--transition-speed);
}

/* === 美化核心 1: 极光背景 (Aurora Background) === */
body::before {
    content: '';
    position: fixed;
    top: 0; left: 0;
    width: 100vw;
    height: 100vh;
    pointer-events: none; /* 确保不影响点击 */
    background: radial-gradient(circle at 10% 20%, var(--color-primary), transparent 40%),
                radial-gradient(circle at 80% 90%, var(--color-accent), transparent 40%);
    opacity: 0.4;
    filter: blur(100px);
    z-index: -1;
    animation: aurora-flow 20s linear infinite alternate;
}

@keyframes aurora-flow {
    from { transform: rotate(0deg) scale(1); }
    to { transform: rotate(360deg) scale(1.2); }
}

/* -------------------------------------------------------------------------- */
/*                       Part 3: 可重用组件与布局 (Components)                */
/* -------------------------------------------------------------------------- */
.page-container {
    max-width: var(--content-width);
    margin-left: auto;
    margin-right: auto;
    padding: 0 var(--spacing-unit);
}

.site-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: calc(var(--spacing-unit) * 2) 0;
    margin-bottom: calc(var(--spacing-unit) * 3);
}

.logo {
    font-weight: 700;
    font-size: var(--font-size-lg);
    text-decoration: none;
    color: var(--color-text);
}

.main-nav {
    display: flex;
    align-items: center;
    gap: calc(var(--spacing-unit) * 1.5);
}

.main-nav a, #theme-toggle {
    font-size: var(--font-size-base);
    color: var(--color-text);
    text-decoration: none;
    font-weight: 600;
    transition: color var(--transition-speed);
}

.main-nav a:hover { color: var(--color-primary); }

#theme-toggle {
    background: none; border: none; cursor: pointer;
}
html[data-theme='light'] .icon-moon { display: none; }
html[data-theme='dark'] .icon-sun { display: none; }

.site-footer {
    padding: calc(var(--spacing-unit) * 4) 0 calc(var(--spacing-unit) * 2);
    text-align: center;
    font-size: var(--font-size-sm);
    color: var(--color-secondary);
}

/* -------------------------------------------------------------------------- */
/*                             Part 4: 主页样式                             */
/* -------------------------------------------------------------------------- */
.hero-section {
    text-align: center;
    padding: calc(var(--spacing-unit) * 2) 0 calc(var(--spacing-unit) * 4);
}
.hero-section h1 { font-size: var(--font-size-xxl); line-height: 1.1; }
.hero-section p { font-size: var(--font-size-md); color: var(--color-secondary); }

.post-list .post-preview {
    display: block;
    text-decoration: none;
    color: inherit;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius);
    padding: calc(var(--spacing-unit) * 2);
    margin-bottom: calc(var(--spacing-unit) * 2);
    transition: transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
}

.post-list .post-preview:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
}

.post-meta {
    display: flex;
    justify-content: space-between;
    font-size: var(--font-size-sm);
    color: var(--color-secondary);
    margin-bottom: var(--spacing-unit);
}

.post-preview h2 {
    font-size: var(--font-size-lg);
    color: var(--color-text);
    margin: 0 0 calc(var(--spacing-unit) * 0.5);
}

.post-preview p {
    font-size: var(--font-size-base);
    color: var(--color-secondary);
}

/* -------------------------------------------------------------------------- */
/*                             Part 5: 文章页样式                             */
/* -------------------------------------------------------------------------- */
#reading-progress-bar {
    position: fixed;
    top: 0;
    left: 0;
    height: 3px;
    background: var(--color-primary);
    width: 0%;
    z-index: 100;
}

.post-full .post-header {
    margin-bottom: calc(var(--spacing-unit) * 3);
    text-align: center;
}
.post-full .post-title {
    font-size: var(--font-size-xl);
    line-height: 1.2;
    margin: 0 0 var(--spacing-unit);
}
.post-full .post-meta {
    justify-content: center;
    gap: var(--spacing-unit);
}

.post-content {
    font-family: var(--font-serif);
    font-size: var(--font-size-base);
}
.post-content > * + * { margin-top: calc(var(--spacing-unit) * 1.5); }

.post-content h2, .post-content h3 { font-family: var(--font-sans); }
.post-content h2 { font-size: var(--font-size-lg); margin-top: calc(var(--spacing-unit) * 3); }
.post-content h3 { font-size: var(--font-size-md); margin-top: calc(var(--spacing-unit) * 2); }

.post-content a { color: var(--color-primary); text-decoration: none; border-bottom: 2px solid; }
.post-content strong { font-weight: 700; }
.post-content ul, .post-content ol { padding-left: calc(var(--spacing-unit) * 2); }

.post-content blockquote {
    border-left: 4px solid var(--color-primary);
    padding-left: calc(var(--spacing-unit) * 1.5);
    font-style: italic;
    color: var(--color-secondary);
}

.post-content pre {
    padding: calc(var(--spacing-unit) * 1.5);
    border-radius: var(--border-radius);
    background-color: var(--color-bg);
    border: 1px solid var(--color-border);
    white-space: pre-wrap; /* 保证代码在移动端可换行 */
    overflow-x: auto;
}

/* -------------------------------------------------------------------------- */
/*                            Part 6: 入场动画                              */
/* -------------------------------------------------------------------------- */
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

.site-header, .hero-section, .post-list, .post-full, .site-footer {
    animation: fadeIn 0.8s ease both;
}

.post-preview { animation: none; /* 卡片使用JS逐个动画 */ }

/* -------------------------------------------------------------------------- */
/*                      Part 7: 移动端最终优化 (Final Polish)                  */
/* -------------------------------------------------------------------------- */
@media (max-width: 600px) {
    /* 缩小移动端标题和间距，确保不拥挤 */
    .site-header { padding: var(--spacing-unit) 0; margin-bottom: var(--spacing-unit) * 2; }
    .post-list .post-preview { padding: var(--spacing-unit) * 1.5; }
    .post-full .post-title { letter-spacing: -1px; } /* 负字间距让大标题在小屏幕上更紧凑 */
}
